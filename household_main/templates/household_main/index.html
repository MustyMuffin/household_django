{% extends 'household_main/base.html' %}

{% load humanize %}
{% load debug_tags %}
{% block page_header %}
  {% if user.is_authenticated %}
    <div class="p-3 mb-4 bg-light border rounded-3">
      <div class="container-fluid py-4">
        <h1 class="display-3">Household</h1>

        <h3>Your Earnings</h3>
          <p><strong>You’ve earned since last payout:</strong> ${{ wage_earned|default:"0.00"|floatformat:2 }}</p>
          <p><strong>Total earned (lifetime):</strong> ${{ lifetime_earned|default:"0.00"|floatformat:2 }}</p>
          <hr>

        <h3>Books Read</h3>
        {% if books_read_list %}
          <ul>
            {% for book in books_read_list %}
              <li>{{ book.book_name }} — {{ book.date_added|date:"M d, Y" }}</li>
            {% endfor %}
          </ul>
        {% else %}
          <p>No books read yet.</p>
        {% endif %}
        <p><strong>Total Words Read:</strong> {{ total_words_read|default:"0" }}</p>
      </div>
    </div>
            <h3>Books Read Leaderboard</h3>

<table class="table table-striped">
  <thead>
    <tr>
      <th scope="col">User</th>
      <th scope="col">Words Read</th>
    </tr>
  </thead>
  <tbody>
    {% for entry in leaderboard %}
      <tr>
        <td>{{ entry.user.username }}</td>
        <td>{{ entry.wordsLifetime|intcomma }}</td>
      </tr>
    {% empty %}
      <tr>
        <td colspan="2">No entries yet.</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
  {% else %}

    <div class="p-3 mb-4 bg-light border rounded-3">
      <div class="container-fluid py-4">
        <h1 class="display-3">Track household things</h1>
        <p class="lead">Automate your house labor</p>
        <a class="btn btn-primary btn-lg mt-1"
           href="{% url 'accounts:register' %}">Register &raquo;</a>
      </div>
    </div>

  {% endif %}
{% endblock page_header %}